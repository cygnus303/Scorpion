<div class="cnote-entry-container px-1">
  <div class="text-white px-3 py-3 d-flex align-items-center fw-semibold background-color">
    <i class="fa fa-edit me-2"></i>
   CNote Entry - Invoice Details
  </div>
  <div class="form-grid p-4">
    <form [formGroup]="docketService.invoiceform">
      <div class="row" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
        <div class="col-md-4" >
          <div class="form-group">
            <label class="control-label col-md-5">CFT Ratio </label>
            <div class="col-md-7">
              <input class="form-control" placeholder="CNote No" type="text" formControlName="cft_Ratio" readonly>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label class="control-label col-md-5">CFT Total </label>
            <div class="col-md-7">
              <input class="required2 form-control required" placeholder="CFT Total" type="text" formControlName="cftTotal" readonly>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label class="control-label col-md-5">No Of Rows </label>
            <div class="col-md-7">
              <input type="number" class="input-small required2 form-control required" [(ngModel)]="docketService.noOfRows" [ngModelOptions]="{standalone: true}" min="1" placeholder="Private Mark" >
            </div>
          </div>
        </div>
        <div class="col-md-1">
          <a class="btn btn-primary right" (click)="docketService.addRows()">
            <i class="fas fa-plus"></i> Add New Row
          </a>
        </div>
        <div class="col-md-5">
        </div>
      </div>
 
    <div class="row">
      <div class="col-md-12">
        <div class="portlet-body table-scrollable">
            <table id="container" class="table table-bordered table-striped table-condensed flip-content">
              <thead class="flip-content">
                <tr>
                  <th class="center">
                    Sr. No.
                  </th>
                  <th class="cente">
                    E-Way Bill No
                  </th>
                  <th class="cente">
                    E-Way Bill Expiry Date
                  </th>
                 
                  <th class="cente">
                    E-Way Bill Invoice Date
                  </th>
                  <th class="center">
                    Invoice No
                  </th>
                  <th class="center">
                    Invoice Date
                  </th>
                  <th class="center clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    Length (Inches)
                  </th>
                  <th class="center clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    Breadth (Inches)
                  </th>
                  <th class="center clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    Height (Inches)
                  </th>
                  <th class="center">
                    Declared Value
                  </th>
     
                  <th class="center">
                    No of Pkgs.
                  </th>
     
                  <th class="center clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    Cubic Weight
                  </th>
                  <th class="center">
                    Actual Weight
                  </th>
     
                  <th class="center">X</th>
                </tr>
              </thead>
              <tbody formArrayName="invoiceRows">
                <tr class="editorRow" *ngFor="let row of docketService.invoiceRows.controls; let i = index" [formGroupName]="i">
                  <input class="iHidden" type="hidden" value="1">
                  <input type="hidden"  value="1">
                  <td class="center">
                    {{ i + 1 }}
                  </td>
                  <td class="center" style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 " maxlength="12" placeholder="E-Way Bill No" formControlName="ewayBillNo" type="text" >
                  </td>
                  <td class="center" style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0"
                      placeholder="dd-MM-yyyy" type="text" formControlName="ewayBillExpiry" readonly>
                  </td>
                  <td class="center" style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0" placeholder="dd-MM-yyyy" type="date"  formControlName="ewayinvoiceDate" (click)="openDatePicker($event)" >
                  </td>
                  <td class="center" style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 required required2" placeholder="Invoice No" type="text" formControlName="invoiceNo">
                  </td>
                  <td class="center" style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 required2" placeholder="dd/MMM/yyyy" type="date"
                      [max]="docketService.today" (click)="openDatePicker($event)"  formControlName="invoicedate" >
                  </td>
                  <td class="center  clsVolumetric" style="padding-bottom: 2px; padding-top: 2px" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    <input class="form-control rounded-0 clsAmount required2 text-end" min="1" type="number"value="0" formControlName="length"  (change)="docketService.getGSTCalculation();docketService.GetDKTGSTForGTA()" (input)="getCFTCalculation(i)">
                  </td>
                  <td class="center  clsVolumetric" style="padding-bottom: 2px; padding-top: 2px; " *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    <input class="form-control rounded-0 clsAmount required2 text-end"  min="1" type="number" value="0" formControlName="breadth"  (change)="docketService.getGSTCalculation();docketService.GetDKTGSTForGTA()" (input)="getCFTCalculation(i)">
                  </td>
                  <td class="center  clsVolumetric" style="padding-bottom: 2px; padding-top: 2px; " *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    <input class="form-control rounded-0 clsAmount required2 text-end"  min="1" type="number" value="0" formControlName="height"  (change)="docketService.getGSTCalculation();docketService.GetDKTGSTForGTA()" (input)="getCFTCalculation(i)">
                  </td>
                  <td class="center " style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 clsAmount required2 text-end"  min="0" placeholder="Invoice value" type="number" value="0" formControlName="declaredvalue" (input)="calculateSummary(i,'declaredvalue')" (blur)="docketService.getGSTCalculation()">
                  </td>
                  <td class="center " style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 clsAmount required2 text-end" placeholder="No of Pkgs." (blur)="GetFreightContractDetails($event);getOtherChargesDetail($event);docketService.getGSTCalculation()" type="number" formControlName="noOfPkgs" (input)="calculateSummary(i, 'noOfPkgs');getCFTCalculation(i)" (change)="docketService.GetDKTGSTForGTA()">
                  </td>
                  <td class="center  clsVolumetric" style="padding-bottom: 2px; padding-top: 2px;" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                    <input class="form-control rounded-0 clsAmount required2  text-end" min="0" type="number" value="0" readonly formControlName="cubicweight">
                  </td>
                  <td class="center " style="padding-bottom: 2px; padding-top: 2px;">
                    <input class="form-control rounded-0 clsAmount required2 text-end"
                      placeholder="Actual Weight" type="number" value="0" formControlName="actualWeight" (input)="calculateSummary(i)"  (blur)="GetFreightContractDetails($event);getOtherChargesDetail($event);docketService.getGSTCalculation()">
                  </td>
                  <td class="center">
                        <div *ngIf="i !== 0" (click)="removeRow(i)" style="color: Maroon; font-size: 14px; font-weight: bolder; text-decoration: none;" class="cursor-pointer" >X</div>
                  </td>
                </tr>
              </tbody>
            <tbody>
              <tr class="editorRow">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td colspan="3" class="clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'"></td>
           
                <td class="center">
                  <input formControlName="totalDeclaredValue" class="form-control rounded-0 clsAmount required2 required text-end"
                    type="number" readonly>
                </td>
           
                <td class="center">
                  <input formControlName="totalNoOfPkgs" class="form-control rounded-0 clsAmount required2 required text-end"
                    type="number" readonly>
                </td>
           
                <td class="center" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'">
                  <input formControlName="totalCubicWeight" class="form-control rounded-0 clsAmount required2 required text-end"
                    type="number" readonly>
                </td>
           
                <td class="center">
                  <input formControlName="totalActualWeight" class="form-control rounded-0 clsAmount required2 required text-end"
                    type="number" readonly>
                </td>
              </tr>
           
              <tr class="editorRow">
                <td colspan="3"></td>
                <td colspan="3"></td>
                <td colspan="3" class="clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'"></td>
           
                <td class="center"><b>Charge Weight/Pkgs.</b></td>
           
                <td class="center">
                  <div class="col-md-11">
                    <input formControlName="chargeWeightPerPkg" class="form-control rounded-0 clsAmount required2 required text-end"
                      type="number" readonly>
                  </div>
                </td>
           
                <td class="clsVolumetric" *ngIf="this.docketService?.step2DetailsList?.isVolumentric === 'Y'"></td>
           
                <td class="center">
                  <div class="col-md-11">
                    <input formControlName="finalActualWeight" class="form-control rounded-0 clsAmount required2 required text-end"
                      type="number"  (ngModelChange)="docketService.getProRataCharge()">
                  </div>
                </td>
              </tr>
            </tbody>
 
            </table>
        </div>
      </div>
    </div>
 
    </form>
  </div>
</div>